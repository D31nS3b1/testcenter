<div class="status-body">
  <div fxLayout="row wrap" fxLayoutAlign="center stretch" [ngSwitch]="(tcs.testStatus$ | async)">

    <mat-card fxFlex="0 0 400px" fxLayout="column" class="mat-card-box" *ngSwitchDefault>
      <mat-card-title>{{ tcs.rootTestlet?.title }}</mat-card-title>
      <mat-card-content>
        <p><b>Angemeldet als "{{loginName}}"</b></p>
        <p><b>{{tcs.testMode.modeLabel}}</b></p>
        <p *ngIf="(tcs.testStatus$ | async) === tcs.testStatusEnum.RUNNING" style="color: chocolate">
          <b>Der Test ist aktiv.</b>
          <b *ngIf="tcs.isLazyLoadingUnit"><br>Unit {{tcs.isLazyLoadingUnit}} wird geladen.</b>
        </p>
      </mat-card-content>
      <mat-card-actions>
        <button mat-raised-button color="primary" (click)="terminateTest()">
          {{ 'Test beenden'  | customtext:'login_testEndButtonLabel' | async}}
        </button>
      </mat-card-actions>
    </mat-card>

    <mat-card fxFlex="0 0 400px" fxLayout="column" class="mat-card-box" *ngSwitchCase="tcs.testStatusEnum.PAUSED">
      <mat-card-title>{{ tcs.rootTestlet?.title }}</mat-card-title>
      <mat-card-content>
        <p><b>Angemeldet als "{{loginName}}"</b></p>
        <p><b>{{tcs.testMode.modeLabel}}</b></p>
        <p style="color: chocolate">
          <b>{{ 'Testpause' | customtext:'booklet_pausedmessage' | async }} </b>
        </p>
      </mat-card-content>
    </mat-card>

    <mat-card fxFlex="0 0 400px" fxLayout="column" class="mat-card-box" *ngSwitchCase="tcs.testStatusEnum.ERROR">
      <mat-card-title >{{error.label}}</mat-card-title>
      <mat-card-content>
        <p><b>Angemeldet als "{{loginName}}"</b></p>
        <p><b>{{tcs.testMode.modeLabel}}</b></p>
        <p style="color: chocolate">
          <b>{{ 'Es ist ein Fehler aufgetreten.' | customtext:'booklet_errormessage' | async }} </b>
        </p>
        <div id="errorDetails" *ngIf="errorDetailsOpen">
          <b>{{error.label}}</b><br>
          {{error.description}}
        </div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-raised-button color="primary" (click)="terminateTest()">
          {{ 'Test beenden'  | customtext:'login_testEndButtonLabel' | async}}
        </button>
        <button mat-raised-button color="none" (click)="toggleErrorDetails()">Fehlerdetails</button>
      </mat-card-actions>
    </mat-card>

    <mat-card *ngSwitchCase="tcs.testStatusEnum.LOADING" class="progress-bar">
      <mat-card-title>{{ tcs.rootTestlet?.title }} - bitte warten</mat-card-title>
      <mat-card-content fxLayout="column">
        <mat-progress-bar
          color="primary"
          mode="determinate"
          [value]="tcs.loadProgressValue">
        </mat-progress-bar>
      </mat-card-content>
    </mat-card>

  </div>
</div>
