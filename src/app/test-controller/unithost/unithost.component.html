<div id="unit-title" *ngIf="tcs.bookletConfig.unit_title === 'ON'" fxLayout="column" fxLayoutAlign="center center">
  <p>{{ unitScreenHeader }}</p>
</div>

<div id="iFrameHost">
</div>

<ng-container *ngIf="unitsLoading$ | async as loadingUnits">
    <div id="waiting-room" *ngIf="loadingUnits.length">
      <mat-card>
        <mat-card-header>
          <mat-card-title *ngIf="loadingUnits.length > 1">
            {{'Aufgabenblock wird geladen' | customtext:'booklet_loadingBlock' | async}}
          </mat-card-title>
          <mat-card-title *ngIf="loadingUnits.length <= 1">
            {{'Aufgabe wird geladen' | customtext:'booklet_loadingUnit' | async}}
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <ng-container *ngFor="let loading of loadingUnits; let index = index">
            <mat-progress-bar
              color="primary"
              [mode]="({'UNKNOWN': 'indeterminate', 'PENDING': 'query'})[loading.progress] || 'determinate'"
              [value]="loading.progress"
            >
            </mat-progress-bar>
            <p class="progress-bar-sub-text">
              {{unitsToLoadLabels[index]}}
              <ng-container [ngSwitch]="loading.progress">
                <span *ngSwitchCase="'UNKNOWN'">
                  ({{'wird geladen' | customtext:'booklet_unitLoadingUnknownProgress' | async}})
                </span>
                <span *ngSwitchCase="'PENDING'">
                  ({{'in der Warteschleife' | customtext:'booklet_unitLoadingPending' | async}})
                </span>
                <span *ngSwitchDefault>
                  ({{loading.progress}}% {{'geladen' | customtext:'booklet_unitLoading' | async}})
                </span>
              </ng-container>
            </p>
          </ng-container>
        </mat-card-content>
      </mat-card>
    </div>
</ng-container>

<div id="pageNav" fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="10px" *ngIf="tcs.bookletConfig.page_navibuttons === 'SEPARATE_BOTTOM'">
  <div fxLayout="row" fxLayoutAlign="space-between center" *ngIf="showPageNav">
      <div id="pageNavPrompt">
        {{ ''  | customtext:'login_pagesNaviPrompt' | async}}
      </div>

      <div *ngFor="let p of pageList">
          <button *ngIf="p.type === '#previous'" (click)="gotoPage(p.type)" [disabled]="p.disabled" fxLayout="row" fxLayoutAlign="center center">
              <i class="material-icons">chevron_left</i>
          </button>
          <button *ngIf="p.type === '#next'" (click)="gotoPage(p.type)" [disabled]="p.disabled" fxLayout="row" fxLayoutAlign="center center">
              <i class="material-icons">chevron_right</i>
          </button>
          <div *ngIf="p.type === '#goto'" fxLayout="column">
              <div class="pageNavEnabled" *ngIf="!p.disabled"></div>
              <div class="pageNavDisabled" *ngIf="p.disabled"></div>
              <button (click)="gotoPage(p.type, p.index)" [disabled]="p.disabled">{{ p.index }}</button>
              <div class="pageNavEnabled" *ngIf="!p.disabled"></div>
              <div class="pageNavDisabled" *ngIf="p.disabled"></div>
          </div>
      </div>
  </div>
</div>
