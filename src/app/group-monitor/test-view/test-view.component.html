<!--    <pre>{{booklet$|async|json}}</pre>-->
<div *ngIf="(booklet$ | async) as booklet; else: noBooklet">

    <div class="booklet">

        <h1>{{booklet.metadata.label}}</h1>
        <div class="testlet">

            <span *ngFor="let testlet of booklet.units.children; trackBy: trackUnits">
                <span
                        *ngIf="filterUnits(testlet) as unit"
                        class="{{(testStatus.unitName === unit.id) ? 'unit current': 'unit'}}"
                        matTooltip="{{unit.label}}"
                >
                    {{unit.labelShort || "&nbsp;"}}
                </span>
<!--                <b>{{testlet.constructor.name}}</b>-->
<!--                <pre>{{testlet|json}}</pre>-->
            </span>


        </div>

        <span *ngFor="let testlet of units; trackBy: trackUnits; let i = index">
            <div class="featured-unit" *ngIf="filterUnit(testlet, testStatus.unitName) as unit" [ngClass]="{'first': i == 0}">
                <div class="title">
                    <div>{{unit.title || 'Ohne Titel'}}</div>
                    <div *ngIf="hasState(testStatus.unitState, 'PRESENTATIONCOMPLETE', 'yes')" class="material-icons unit-badge">
                        remove_red_eye
                    </div>
                </div>


<!--                <div class="state"><pre>{{testStatus.unitState | json}}</pre></div>-->
<!--                <div class="state"><pre>{{testStatus.testState | json}}</pre></div>-->
<!--                <div class="state"><pre>{{unit | json}}</pre></div>-->
            </div>
        </span>

    </div>




</div>

<ng-template #noBooklet>
    <div class="booklet">
        <h1>Noch kein Test gestarted.</h1>
    </div>
</ng-template>
