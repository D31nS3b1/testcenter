<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>iqb-testcenter documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="./images/favicon.ico">
	   <link rel="stylesheet" href="./styles/style.css">
        <link rel="stylesheet" href="./styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="./" class="navbar-brand">iqb-testcenter documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content getting-started">
                   <div class="content-data">

<p>#Changelog</p>
<h2 id="backend-1202">Backend 12.0.2</h2>
<p>Fixes data-migration from versions before 12.0.0. With the update to version 12.0.0 the way, response-data is stored
changed. Data from existing units should be migrated, but that might fail in some installations. With this patch
12.0.2 this state will be repaired and the remaining data will get migrated.</p>
<h2 id="frontend-1202">Frontend 12.0.2</h2>
<p>Various Bugfixes:</p>
<ul>
<li>(#341) When you visited a test in demo-mode as a monitor, and terminated it, you returned to the starter but didn&#39;t see the monitor-monitor button again. That got fixed.</li>
<li>(#340) After reload you return to the correct unit now</li>
<li>(#335) Order of checks when leaving a unit is fixed: First check completeness, then ask for leaving the timed block</li>
<li>(#347) Dont&#39;t check navigationLeaveRestrictions if unit is already time-locked.</li>
</ul>
<p>Minor Changes</p>
<ul>
<li>In &quot;demo&quot; mode &quot;showTimeLeft&quot; is off now</li>
<li>Use Font Roboto everywhere</li>
</ul>
<h2 id="backend-1201">Backend 12.0.1</h2>
<ul>
<li>Timeout for admin sessions was extended to 10h (from 30min)</li>
</ul>
<h3 id="bugfixes">Bugfixes:</h3>
<ul>
<li>Wrong numbers in Results overview</li>
<li>Handle bogus Player-Metadata</li>
</ul>
<h2 id="frontend-1201">Frontend 12.0.1</h2>
<p>Fix critical bug in login</p>
<h2 id="backend-1200">Backend 12.0.0</h2>
<p>This update makes the Teststudio Verona3- and 4 compatible.</p>
<h3 id="endpoints">Endpoints</h3>
<ul>
<li>the responses-output from <code>/workspace/{ws_id}/responses</code> and <code>/workspace/{ws_id}/report/response</code>
now contains the chunk names. eg: <code>{&quot;all&quot;:&quot;{\&quot;key\&quot;: \&quot;value\&quot;}&quot;</code> instead of <code>{\&quot;key\&quot;: \&quot;value\&quot;}</code></li>
<li>new Endpoint <code>/{auth_token}/resource/{resource_name}</code> is an alternative way for fetching resources. It can be used as
<code>directDownloadUrl</code>-parameter (see <a href="https://verona-interfaces.github.io/player/#operation-publish-vopStartCommand">here</a>)
in Verona4-players.</li>
<li>Those deprecated endpoints are removed<ul>
<li><code>[GET] /workspace/{ws_id}/logs</code></li>
<li><code>[GET] /workspace/{ws_id}/reviews</code></li>
<li><code>[GET] /workspace/{ws_id}/responses</code></li>
<li><code>[GET] /workspace/{ws_id}/sys-check/reports</code></li>
</ul>
</li>
</ul>
<h3 id="xsd">XSD</h3>
<ul>
<li>in the <code>Booklet.xml</code>-format a new restriction is allowed: <code>&lt;DenyNavigationOnIncomplete&gt;</code>. It forbids the leaving of<br>units of a testlet under certain circumstances: if the unit was not presented oder responded completely. The attributes
<code>presentation</code> and <code>response</code> may have the values <code>OFF</code>, <code>ON</code> and <code>ALWAYS</code>. Always tells the testcenter, to check
the completeness and response-progress everytime the unit shall be left regardless of teh direction. <code>ON</code> only checks
if the testee want to proceed forwards.</li>
<li>The <code>Booklet.xsd</code> now validates correctly that <code>&lt;unit&gt;</code>-id must only be unique if no alias is set and otherwise the
alias must be unique.</li>
</ul>
<h3 id="database">Database</h3>
<ul>
<li>The unit-data now gets stored in an additional table <code>test_data</code>, not in <code>tests</code> anymore to allow chunkwise updates.
There will be a data-migration, but depending on the specific format of the player it can be possible, that
previously edited units will not be restored correctly.</li>
<li>See <code>scripts/sql-schema/patches.mysql.d/12.0.0</code>.</li>
</ul>
<h2 id="frontend-1200">Frontend 12.0.0</h2>
<p>This Version implements Verona 3 and Verona 4 specs.</p>
<h3 id="version-number">Version-Number</h3>
<p>We synchronize version-numbers of front- and backend to 12 because there will be only one version-number in the future anyway.</p>
<h3 id="fixes">Fixes</h3>
<ul>
<li>(Almost) all <a href="https://iqb-berlin.github.io/testcenter-frontend/booklet-config">defined booklet-parameters</a> should work now.</li>
<li>Redesign of the Unit- and Page-Navigation.</li>
<li>Improved error-handling (especially while loading tests).</li>
<li>Improved behaviour while loading, make progress bar actually show progress.</li>
<li>The sandboxing of the player&#39;s iframe is improved to maintain security and also allow links into new tabs.</li>
</ul>
<h3 id="new-features">New Features</h3>
<ul>
<li><a href="https://github.com/verona-interfaces/player">Verona 3 and Verona 4</a> compatible!</li>
<li>New Navigation-paradigm:<ul>
<li>Instead of hindering the user to enter a unit which is locked (by timer, by code oder because it&#39;s not loaded yet), it can now regardless
be entered but will not be displayed. This allows the testee to go back or do whatever she wants when entering a locked unit instead of landing in
a navigational limbo with no escape.</li>
<li>Units, that have no timer get never locked now, and the testee is <strong>always</strong> allowed to return to them - even if (and this is new) there is a locked block
between ths current and the target unit.</li>
</ul>
</li>
<li>You can now restrict your units to can only be left when everything was seen and/or edited. For this there are
booklet-parameter <code>force_presentation_complete</code> and <code>force_response_complete</code> as well as new Restriction-Element called <code>&lt;DenyNavigationOnIncomplete&gt;</code>.</li>
<li>new useful booklet-parameters <code>restore_current_page_on_return</code>, <code>show_end_button_in_player</code>, <code>allow_player_to_terminate_test</code>, <code>lock_test_on_termination</code>.</li>
</ul>
<h3 id="known-issues">Known Issues</h3>
<ul>
<li>This version of the Testcenter is compatible with all known players that use the Verona2, Verona3 oder Verona4 interface. A noteworthy exception is the simple player 2.
Because the dataParts where implemented wrongly (not stringified), it will not be able to restore previously entered unit data after relaod/re-login anymore
(but apart from that work correctly).</li>
<li>In Verona 2+ there is mode for <code>stateReportPolicy</code> called <code>on-demand</code>- This can be set in the
booklet is still <em>not</em> supported by the testcenter. (It will fall back to <code>eager</code>). <a href="https://github.com/iqb-berlin/testcenter-frontend/issues/324">#324</a></li>
</ul>
<h2 id="backend-1160">Backend 11.6.0</h2>
<p>This update refactors the CSV-output for various data: logs, reviews, test-results and sys-check-reports.
The CSVs can now all be generated in the backend and retrieved via analogous endpoints. The data is also available
as JSON. All CSVs contain BOMs now.</p>
<h3 id="endpoints-1">Endpoints</h3>
<ul>
<li>The four new endpoints for retrieving reports:<ul>
<li><code>[GET] /workspace/{ws_id}/report/log</code></li>
<li><code>[GET] /workspace/{ws_id}/report/review</code></li>
<li><code>[GET] /workspace/{ws_id}/report/response</code></li>
<li><code>[GET] /workspace/{ws_id}/report/sys-check</code></li>
</ul>
</li>
<li>The old ones are now deprecated and will be removed soon:<ul>
<li><code>[GET] /workspace/{ws_id}/logs</code></li>
<li><code>[GET] /workspace/{ws_id}/reviews</code></li>
<li><code>[GET] /workspace/{ws_id}/responses</code></li>
<li><code>[GET] /workspace/{ws_id}/sys-check/reports</code></li>
</ul>
</li>
</ul>
<h2 id="backend-150">Backend 1.5.0</h2>
<p>Fixes some issues in the file-management.</p>
<h2 id="backend-1120">Backend 11.2.0</h2>
<p>Adds the missing second endpoint for the customization-module.</p>
<h3 id="endpoints-2">Endpoints</h3>
<ul>
<li>contains the new endpoint <code>[PATCH] /system/config/custom-texts</code>, which updates the key-value-store for the frontend analogous to customTexts.</li>
</ul>
<h2 id="backend-1110">Backend 11.1.0</h2>
<p>This update provides the API for the customziation-module.</p>
<h3 id="endpoints-3">Endpoints</h3>
<ul>
<li>contains the new endpoint <code>[PATCH] /system/config/app</code>, which updates the key-value-store for the frontend analogous to customTexts.</li>
<li><code>[GET] /system/config</code> provides the key-value store &#39;app-config&#39; as well.<h3 id="database-1">Database</h3>
</li>
<li>See <code>scripts/sql-schema/patches.mysql.d/11.1.0</code></li>
</ul>
<h2 id="backend-1100">Backend 11.0.0</h2>
<p>This update contains various changes around the improved Group-Monitor.</p>
<h3 id="endpoints-4">Endpoints</h3>
<ul>
<li>A new endpoint <code>[GET] /system/time</code> was added to retrieve the server&#39;s time and time zone.</li>
<li>A new endpoint where added: <code>/monitor/group/{group_name}/tests/unlock</code></li>
<li>A new endpoint was added: <code>[POST] /test/{test_id}/connection-lost</code>. It can be triggered by a closing browser as well
as from the broadcasting-service to notify a lost connection to the testController. Note: This endpoint does not
need any credentials.<h3 id="database-2">Database</h3>
</li>
<li>See <code>scripts/sql-schema/patches.mysql.d/11.0.0</code></li>
</ul>
<h2 id="backend-1000">Backend 10.0.0</h2>
<p>This update does not contain new functionality. It&#39;s about the init/install script, which can do database-migration from
older to newer versions by itself now. The version 10 indicates the beginning of an era with versioned database-schemas.
There is no manual patching necessary anymore after an update. So changes in the DB does not force a new major-version
anymore.</p>
<h2 id="backend-920">Backend 9.2.0</h2>
<h3 id="xsd-1">XSD</h3>
<ul>
<li>Additional elements and attributes needed by teststudio-lite where added. They have no affect for the testcenter at
the moment.</li>
</ul>
<h2 id="backend-910">Backend 9.1.0</h2>
<h3 id="endpoints-5">Endpoints</h3>
<ul>
<li>You can now insert an optional parameter <code>/alias/{alias}</code> in the end to obtain data if unit is defined with
an alias in the booklet. This is an HotFix for <a href="https://github.com/iqb-berlin/testcenter-frontend/issues/261">https://github.com/iqb-berlin/testcenter-frontend/issues/261</a>.</li>
</ul>
<h2 id="backend-900">Backend 9.0.0</h2>
<p>The main content of this update is a complete refactoring of the (XML-)File-classes,
Workspace validation and XML-File-Handling. The main goal was to keep validity and
consistency of the workspaces. The refactoring shall also allow more and deeper validation
checks, update scripts and more in the future. The whole part of the software is now backed
with unit-tests galore.</p>
<h3 id="requirements">Requirements</h3>
<ul>
<li><strong>PHP 7.4 is now required</strong><h3 id="endpoints-6">Endpoints</h3>
</li>
<li>The <code>[GET] /workspace/{id}/validation</code> endpoint <strong>was removed completely</strong>.
Validation takes now place on file upload and on <code>[GET] /workspace/{id}/files</code>.</li>
<li>Return-Values and Status-Codes of <code>[POST] /workspace/{id}/file</code>
and <code>[GET] /workspace/{id}/files</code> where changed <strong>significantly</strong> to contain the
file&#39;s validation information as well as some metadata to display in the frontend.<h3 id="xml">XML</h3>
</li>
<li>XML-files without a reference to a XSD-Schema generate a warning now. Currently,
the reference can only be done with the <code>noNamespaceSchemaLocation</code>-tag!</li>
<li>Player-Metadata as defined in <a href="https://github.com/verona-interfaces/player/blob/master/api/playermetadata.md">verona2</a>
is supported now.<h3 id="config">Config</h3>
</li>
<li><code>config/system.json</code> contains a new (optional) value: <code>allowExternalXMLSchema</code>
(boolean, defaults to true) . It defines wether the program is allowed to fetch
XSD schemas from external URLs.</li>
</ul>
<h2 id="frontend-900">Frontend 9.0.0</h2>
<ul>
<li>Update Angular version from 9 to 12</li>
</ul>
<h2 id="backend-800">Backend 8.0.0</h2>
<p>The role <code>monitor-study</code> / <code>workspaceMonitor</code> was removed completely and all functions and endpoints depending on it.</p>
<h3 id="xml-1">XML</h3>
<ul>
<li>Mode <code>monitor-study</code> was removed from the <code>mode</code>-attribute<h3 id="endpoints-7">Endpoints</h3>
</li>
<li>The following endpoints where removed</li>
<li><code>[PATCH] /{ws_id}/tests/unlock</code></li>
<li><code>[PATCH] /{ws_id}/tests/lock</code></li>
<li><code>[GET] /{ws_id}/status</code></li>
<li><code>[GET] /{ws_id}/booklets/started</code></li>
</ul>
<h2 id="backend-740">Backend 7.4.0</h2>
<h3 id="xml-2">XML</h3>
<ul>
<li>A new mode for logins is allowed now: <code>run-demo</code></li>
</ul>
<h2 id="backend-700">Backend 7.0.0</h2>
<h3 id="endpoints-8">Endpoints</h3>
<ul>
<li>Log- and State-Endpoints<ul>
<li><code>[patch] \test\{test_id}\state</code></li>
<li><code>[put] \test\{test_id}\log</code></li>
<li><code>[patch] \test\{test_id}\unit\{unit_name}\state</code></li>
<li><code>[put] \test\{test_id}\unit\{unit_name}\log</code><br>were changed:</li>
<li>They all take items in the form<div><pre class="line-numbers"><code class="language-none">[
  {
 &quot;key&quot;: __my_key__,
 &quot;content&quot;: __my_content__,
 &quot;timeStamp&quot;: 1234567891
  }
]</code></pre></div></li>
<li>A state change automatically whites a log now.</li>
</ul>
</li>
<li><code>Timestamp</code> parameter in various endpoints is now <code>timeStamp</code> to resemble the Verona 2 Standard</li>
</ul>
<h2 id="backend-610">Backend 6.1.0</h2>
<h3 id="database-3">Database</h3>
<ul>
<li>You have to apply database structure changes,
see <code>scripts/sql-schema/patches.mysql.sql</code></li>
</ul>
<h2 id="backend-600">Backend 6.0.0</h2>
<ul>
<li>Hint: Sample Data/Player is still not supporting Verona 2.0 Interface,
although compatible frontend version expect them!</li>
</ul>
<h2 id="backend-503">Backend 5.0.3</h2>
<h3 id="config-1">Config</h3>
<ul>
<li>You have to manipulate the contents of <code>config/system.json</code>: You need now two parameters
<code>broadcastServiceUriPush</code> and <code>broadcastServiceUriSubscribe</code> instead of just <code>broadcastServiceUri</code>.</li>
</ul>
<h2 id="backend-400">Backend 4.0.0</h2>
<p>Introduced the group-monitor for the frist time.</p>
<h3 id="xml-3">XML</h3>
<h4 id="testtakers">Testtakers</h4>
<ul>
<li><code>name</code>-attribute of <code>&lt;group&gt;</code>-element is now called <code>&lt;id&gt;</code></li>
<li>introduced optional attribute <code>label</code> for <code>&lt;group&gt;</code>-element</li>
<li>in <code>&lt;Metadata&gt;</code>-element, only the optional <code>&lt;Description&gt;</code> field remains<h4 id="booklet">Booklet</h4>
</li>
<li>changed defintion of <code>&lt;Testlet&gt;</code>-element to get rid of a warning,
that <code>&lt;Unit&gt;</code> was not allowed in some legal constellations</li>
<li><code>id</code>-attribute is now mandatory for testlets</li>
<li><code>&lt;Units&gt;</code>-element can not contain <code>id</code> or <code>label</code> (since it won&#39;t be
visible anywhere anyway), and first <code>&lt;Restrictions&gt;</code> can not contain
<code>&lt;CodeToEnter&gt;</code>, which would not make any sense</li>
<li>Made <code>&lt;Restriction&gt;</code> more readable: generic <code>parameter</code>-paremater is
now renamed to <code>minutes</code> in context of <code>&lt;TimeMax&gt;</code> and to <code>code</code> for
<code>&lt;CodeToEnter&gt;</code>-element.</li>
<li>in <code>&lt;Metadata&gt;</code>-element, the elements <code>&lt;ID&gt;</code> and <code>&lt;Label&gt;</code> are mandatory,
and <code>&lt;Description&gt;</code> is optional, the rest does not exist anymore.<h4 id="syscheck">SysCheck</h4>
</li>
<li>in <code>&lt;Metadata&gt;</code>-element, the elements <code>&lt;ID&gt;</code> and <code>&lt;Label&gt;</code> are mandatory,
and <code>&lt;Description&gt;</code> is optional, the rest does not exist anymore.<h4 id="unit">Unit</h4>
</li>
<li>in <code>&lt;Metadata&gt;</code>-element, the elements <code>&lt;ID&gt;</code> and <code>&lt;Label&gt;</code> are mandatory,
and <code>&lt;Description&gt;</code> is optional, the rest does not exist anymore.</li>
</ul>




















                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 0;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'getting-started';
            var COMPODOC_CURRENT_PAGE_URL = 'changelog.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="./js/libs/custom-elements.min.js"></script>
       <script src="./js/libs/lit-html.js"></script>

       <script src="./js/menu-wc.js" defer></script>
       <script nomodule src="./js/menu-wc_es5.js" defer></script>

       <script src="./js/libs/bootstrap-native.js"></script>

       <script src="./js/libs/es6-shim.min.js"></script>
       <script src="./js/libs/EventDispatcher.js"></script>
       <script src="./js/libs/promise.min.js"></script>
       <script src="./js/libs/zepto.min.js"></script>

       <script src="./js/compodoc.js"></script>

       <script src="./js/tabs.js"></script>
       <script src="./js/menu.js"></script>
       <script src="./js/libs/clipboard.min.js"></script>
       <script src="./js/libs/prism.js"></script>
       <script src="./js/sourceCode.js"></script>
          <script src="./js/search/search.js"></script>
          <script src="./js/search/lunr.min.js"></script>
          <script src="./js/search/search-lunr.js"></script>
          <script src="./js/search/search_index.js"></script>
       <script src="./js/lazy-load-graphs.js"></script>


    </body>
</html>
