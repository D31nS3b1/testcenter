<mat-card class="main-alert" attr.data-cy="main-alert:{{error.type}}" *ngIf="error">
  <mat-card-title>
    <alert text="{{ error.label }}" [level]="error.type =='warning' ? 'warning' : 'error'"></alert>
    <button
      mat-icon-button
      class="main-alert-close-button"
      (click)="closeClick()"
      [matTooltip]="closeCaption ?? defaultCloseCaption ?? 'Schließen'"
    >
      <mat-icon>close</mat-icon>
    </button>
  </mat-card-title>
  <mat-card-content>
    <ng-content></ng-content>
    <div id="errorDetailsWrapper" *ngIf="errorDetailsOpen">
      <b>Fehlerbericht</b>
      <div id="errorDetails">
        <p><b>{{error.label}}</b></p>
        <p>{{error.description}}</p>
        <p>{{error.details}}</p>
        <p><b>Error-Id:</b> {{error.errorId}}</p>
        <p *ngFor="let item of additionalReport | keyvalue">
          <b>{{item.key}}:</b>{{item.value}}
        </p>
        <p><b>Browser: </b>{{browser.browser.name}} {{browser.browser.version}}</p>
        <p><b>Betriebssystem: </b>{{browser.os.name}} {{browser.os.version}}</p>
        <p><b>Gerät: </b>{{browser.device.type}} {{browser.device.vendor}} {{browser.device.model}}</p>
      </div>
    </div>
  </mat-card-content>
  <mat-card-actions>
    <button mat-raised-button color="primary" (click)="closeClick()">
      {{closeCaption ?? defaultCloseCaption ?? 'Schließen'}}
    </button>
    <button mat-raised-button (click)="toggleErrorDetails()">Fehlerdetails</button>
  </mat-card-actions>
</mat-card>